{% extends 'base.html' %}

{% block title %}Edit Cost Code - Magellan EV Tracker{% endblock %}

{% block page_title %}Edit Cost Code{% endblock %}

{% block content %}
<div class="data-container">
    <form method="POST">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="code" class="form-label">Cost Code ID</label>
                    <input type="text" name="code" id="code" class="form-control" value="{{ cost_code.cost_code_id_str }}" required>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="description" class="form-label">Description</label>
                    <input type="text" name="description" id="description" class="form-control" value="{{ cost_code.description }}" required>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="discipline" class="form-label">Discipline</label>
                    <select name="discipline" id="discipline" class="form-select" required>
                        <option value="">Select Discipline</option>
                        {% for discipline_value, discipline_name in disciplines %}
                        <option value="{{ discipline_value }}" {% if cost_code.discipline == discipline_value %}selected{% endif %}>{{ discipline_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="uom" class="form-label">Unit of Measure</label>
                    <input type="text" name="uom" id="uom" class="form-control" value="{{ cost_code.uom or '' }}" placeholder="e.g., EA, LF, SF, CY">
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="project_id" class="form-label">Project</label>
                    <select name="project_id" id="project_id" class="form-select">
                        <option value="">Select Project (Optional)</option>
                        {% for project in projects %}
                        <option value="{{ project.id }}" {% if cost_code.project_id == project.id %}selected{% endif %}>{{ project.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="rule_of_credit_id" class="form-label">Rule of Credit</label>
                    <select name="rule_of_credit_id" id="rule_of_credit_id" class="form-select">
                        <option value="">Select Rule of Credit (Optional)</option>
                        {% for rule in rules %}
                        <option value="{{ rule.id }}" {% if cost_code.rule_of_credit_id == rule.id %}selected{% endif %}>{{ rule.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col-12">
                <button type="submit" class="btn-primary">Update Cost Code</button>
                <a href="{{ url_for('main.cost_codes') }}" class="btn-outline-light ms-2">Cancel</a>
            </div>
        </div>
    </form>
</div>
{% endblock %}
